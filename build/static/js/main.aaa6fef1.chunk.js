(this["webpackJsonpcelo-dao"]=this["webpackJsonpcelo-dao"]||[]).push([[0],{403:function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_address","type":"address"}],"name":"MemberRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_address","type":"address"},{"indexed":false,"internalType":"uint256","name":"_votingPower","type":"uint256"}],"name":"NewMember","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"proposalId","type":"uint256"},{"indexed":true,"internalType":"address","name":"proposer","type":"address"},{"indexed":false,"internalType":"string","name":"description","type":"string"}],"name":"ProposalCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"proposalId","type":"uint256"},{"indexed":true,"internalType":"address","name":"voter","type":"address"},{"indexed":false,"internalType":"bool","name":"vote","type":"bool"}],"name":"ProposalVoted","type":"event"},{"inputs":[{"internalType":"address","name":"_address","type":"address"},{"internalType":"uint256","name":"_votingPower","type":"uint256"}],"name":"addMember","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_description","type":"string"}],"name":"createProposal","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_proposalId","type":"uint256"}],"name":"executeProposal","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getProposal","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"address","name":"","type":"address"},{"internalType":"string","name":"","type":"string"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getProposalsLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"memberCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"members","outputs":[{"internalType":"address","name":"memberAddress","type":"address"},{"internalType":"uint256","name":"votingPower","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"proposalCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"proposals","outputs":[{"internalType":"uint256","name":"proposalId","type":"uint256"},{"internalType":"address","name":"proposer","type":"address"},{"internalType":"string","name":"description","type":"string"},{"internalType":"uint256","name":"yesVotes","type":"uint256"},{"internalType":"uint256","name":"noVotes","type":"uint256"},{"internalType":"bool","name":"executed","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"removeMember","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_proposalId","type":"uint256"},{"internalType":"bool","name":"_vote","type":"bool"}],"name":"vote","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},411:function(e,t,n){},413:function(e,t,n){},429:function(e,t){},430:function(e,t){},432:function(e,t){},436:function(e,t){},460:function(e,t){},462:function(e,t){},476:function(e,t){},478:function(e,t){},506:function(e,t){},508:function(e,t){},525:function(e,t){},526:function(e,t){},599:function(e,t){},600:function(e,t){},692:function(e,t){},697:function(e,t){},879:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(59),c=n.n(s),o=(n(411),n(67)),i=n(18),u=n(24),l=n.n(u),d=(n(413),n(888)),p=n(882),b=n(887),j=n(883),m=n(884),y=n(890),f=n(889),x=n(398),h=n(1),O=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(""),o=Object(i.a)(c,2),u=o[0],l=o[1],O=Object(a.useState)(""),v=Object(i.a)(O,2),w=v[0],g=v[1],T=Object(a.useState)(0),k=Object(i.a)(T,2),C=k[0],M=k[1],P=Object(a.useState)(!1),N=Object(i.a)(P,2),S=N[0],I=N[1],A=function(){return I(!1)},B=Object(a.useState)(!1),V=Object(i.a)(B,2),F=V[0],_=V[1],D=function(){return _(!1)},E=Object(a.useState)(!1),H=Object(i.a)(E,2),L=H[0],R=H[1],U=function(){return R(!1)};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(d.a,{bg:"light",children:Object(h.jsxs)(p.a,{children:[Object(h.jsx)(d.a.Brand,{href:"#home",children:"Celo Dao"}),Object(h.jsx)(d.a.Toggle,{}),Object(h.jsx)(b.a,{className:"me-auto",children:Object(h.jsxs)(j.a,{bg:"secondary",className:"ms-auto",children:["Balance ",e.cUSDBalance,"cUSD"]})}),Object(h.jsxs)(d.a.Collapse,{className:"justify-content-end",children:[Object(h.jsx)(m.a,{onClick:function(){return I(!0)},variant:"dark",children:Object(h.jsx)("h5",{children:" Create Proposal "})}),Object(h.jsx)(m.a,{onClick:function(){return _(!0)},variant:"dark",children:Object(h.jsx)("h5",{children:" Add New Member "})}),Object(h.jsx)(m.a,{onClick:function(){return R(!0)},variant:"dark",children:Object(h.jsx)("h5",{children:" Remove Member "})})]})]})}),Object(h.jsxs)(y.a,{show:S,onHide:A,centered:!0,children:[Object(h.jsx)(y.a.Header,{closeButton:!0,children:Object(h.jsx)(y.a.Title,{children:"New Proposal"})}),Object(h.jsx)(f.a,{children:Object(h.jsx)(y.a.Body,{children:Object(h.jsx)(x.a,{controlId:"inputDescription",label:"Description",className:"mb-3",children:Object(h.jsx)(f.a.Control,{as:"textarea",placeholder:"description",style:{height:"80px"},onChange:function(e){s(e.target.value)}})})})}),Object(h.jsxs)(y.a.Footer,{children:[Object(h.jsx)(m.a,{variant:"outline-secondary",onClick:A,children:"Close"}),Object(h.jsx)(m.a,{variant:"dark",disabled:!r,onClick:function(){e.addProposal(r),A()},children:"Add Proposal"})]})]}),Object(h.jsxs)(y.a,{show:F,onHide:D,centered:!0,children:[Object(h.jsx)(y.a.Header,{closeButton:!0,children:Object(h.jsx)(y.a.Title,{children:"New Memnber"})}),Object(h.jsx)(f.a,{children:Object(h.jsxs)(y.a.Body,{children:[Object(h.jsx)(x.a,{controlId:"inputAddress",label:"MemberAddress",className:"mb-3",children:Object(h.jsx)(f.a.Control,{type:"text",onChange:function(e){l(e.target.value)},placeholder:"Address"})}),Object(h.jsx)(x.a,{controlId:"inputVotingPower",label:"Voting Power",className:"mb-3",children:Object(h.jsx)(f.a.Control,{type:"number",onChange:function(e){M(e.target.value)},placeholder:"Select Voting Power"})})]})}),Object(h.jsxs)(y.a.Footer,{children:[Object(h.jsx)(m.a,{variant:"outline-secondary",onClick:D,children:"Close"}),Object(h.jsx)(m.a,{variant:"dark",disabled:!u,onClick:function(){e.addMember(u,C),D()},children:"Add New Member"})]})]}),Object(h.jsxs)(y.a,{show:L,onHide:U,centered:!0,children:[Object(h.jsx)(y.a.Header,{closeButton:!0,children:Object(h.jsx)(y.a.Title,{children:"Remove Memnber"})}),Object(h.jsx)(f.a,{children:Object(h.jsx)(y.a.Body,{children:Object(h.jsx)(x.a,{controlId:"inputAddress",label:"MemberAddress",className:"mb-3",children:Object(h.jsx)(f.a.Control,{type:"text",onChange:function(e){g(e.target.value)},placeholder:"Address"})})})}),Object(h.jsxs)(y.a.Footer,{children:[Object(h.jsx)(m.a,{variant:"outline-secondary",onClick:U,children:"Close"}),Object(h.jsx)(m.a,{variant:"dark",disabled:!w,onClick:function(){e.removeMember(w),U()},children:"Remove Member"})]})]})]})},v=n(885),w=n(397),g=n(891),T=n(892),k=function(e){return Object(h.jsx)(v.a,{xs:1,md:3,className:"g-4",children:e.proposals.map((function(t){return Object(h.jsx)(w.a,{children:Object(h.jsxs)(g.a,{className:"h-100",children:[Object(h.jsx)(g.a.Header,{children:Object(h.jsxs)(T.a,{direction:"horizontal",gap:2,children:[Object(h.jsxs)(j.a,{bg:"secondary",className:"ms-auto",children:[t.proposalId," ID"]}),Object(h.jsxs)(j.a,{bg:"secondary",className:"ms-auto",children:[t.yesVotes," yes Votes"]}),Object(h.jsxs)(j.a,{bg:"secondary",className:"ms-auto",children:[t.noVotes," no Votes"]})]})}),Object(h.jsxs)(g.a.Body,{className:"d-flex  flex-column text-center text-dark",children:[Object(h.jsx)(g.a.Title,{children:t.description}),e.walletAddress===t.proposer&&Object(h.jsx)(m.a,{variant:"primary mt-2",onClick:function(){return e.executeProposal(t.proposalId)},children:"Execute Proposal"}),Object(h.jsx)("form",{children:Object(h.jsxs)("div",{class:"form-r mt-2",children:[Object(h.jsx)("button",{type:"button",onClick:function(){return e.vote(t.proposalId,!0)},class:"btn btn-dark mt-1",children:"Vote Yes"}),Object(h.jsx)("button",{type:"button",onClick:function(){return e.vote(t.proposalId,!1)},class:"btn btn-dark mt-1",children:"Vote No"})]})})]})]})},t.index)}))})},C=n(399),M=n.n(C),P=n(402),N=n(403);var S=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(null),c=Object(i.a)(s,2),u=c[0],d=c[1],p=Object(a.useState)(null),b=Object(i.a)(p,2),j=b[0],m=b[1],y=Object(a.useState)(0),f=Object(i.a)(y,2),x=f[0],v=f[1],w=Object(a.useState)([]),g=Object(i.a)(w,2),T=g[0],C=g[1],S=function(){var e=Object(o.a)(l.a.mark((function e(){var t,n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.celo){e.next=22;break}return e.prev=1,e.next=4,window.celo.enable();case 4:return t=new M.a(window.celo),n=Object(P.newKitFromWeb3)(t),e.next=8,n.web3.eth.getAccounts();case 8:return a=e.sent,r=a[0],n.defaultAccount=r,e.next=13,d(r);case 13:return e.next=15,m(n);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),console.log(e.t0);case 20:e.next=23;break;case 22:alert("Error Occurred");case 23:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}(),I=Object(a.useCallback)(Object(o.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.getTotalBalance(u);case 3:t=e.sent,n=t.cUSD.shiftedBy(-18).toFixed(2),a=new j.web3.eth.Contract(N,"0x69dfb020bA12Ce303118E3eF81f9b9E4eB08cE17"),r(a),v(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[u,j]),A=Object(a.useCallback)(Object(o.a)(l.a.mark((function e(){var t,a,r,s,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.methods.getProposalsLength().call();case 2:for(t=e.sent,a=[],r=function(e){var t=new Promise(function(){var t=Object(o.a)(l.a.mark((function t(a,r){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.methods.getProposal(e).call();case 2:s=t.sent,a({index:e,proposalId:s[0],proposer:s[1],description:s[2],yesVotes:s[3],noVotes:s[4],executed:s[6]});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());a.push(t)},s=0;s<t;s++)r(s);return e.next=8,Promise.all(a);case 8:c=e.sent,C(c);case 10:case"end":return e.stop()}}),e)}))),[n]),B=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.createProposal(t).send({from:u});case 3:A(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(o.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.addMember(t,a).send({from:u});case 3:A(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.removeMember(t).send({from:u});case 3:A(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(o.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.vote(t,a).send({from:u});case 3:A(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.methods.executedProposal(t).send({from:u});case 3:A(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){S()}),[]),Object(a.useEffect)((function(){j&&u&&I()}),[j,u,I]),Object(a.useEffect)((function(){n&&A()}),[n,A]),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(O,{cUSDBalance:x,addMember:V,addProposal:B,removeMember:F}),Object(h.jsx)(k,{proposals:T,vote:_,executeProposal:D,walletAddress:u})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,893)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};n(875),n(876);c.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(S,{})}),document.getElementById("root")),I()}},[[879,1,2]]]);
//# sourceMappingURL=main.aaa6fef1.chunk.js.map